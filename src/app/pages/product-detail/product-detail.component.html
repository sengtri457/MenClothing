<div class="container py-4" *ngIf="product">
  <div class="row g-4">
    <!-- Left Column: Image Slider -->
    <div class="col-md-6 d-flex flex-column align-items-center">
      <!-- Main Image -->
      <div class="main-image-wrapper position-relative">
        <img [src]="product.listImage[currentIndex]" [alt]="product.name"
          class="w-100  shadow-sm object-fit-cover shadow-sm">

        <!-- Navigation Arrows -->
        <button class="nav-btn left"
          (click)="currentIndex = (currentIndex - 1 + product.listImage.length) % product.listImage.length">
          <i class="bi bi-chevron-left"></i>
        </button>
        <button class="nav-btn right" (click)="currentIndex = (currentIndex + 1) % product.listImage.length">
          <i class="bi bi-chevron-right"></i>
        </button>
      </div>

      <!-- Thumbnail List -->
      <div class="thumb-row d-flex justify-content-center gap-3 mt-3">
        <div *ngFor="let item of product.listImage; let i = index" class="thumb-wrapper"
          [class.active]="i === currentIndex" (click)="setActiveImage(i)">
          <img [src]="item" [alt]="product.name" class="thumb-img rounded-2 shadow-sm">
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <a routerLink="/men" class="small text-decoration-none text-secondary">← Back</a>
      <h2 class="mt-2">{{ product.name }}</h2>
      <div class="d-flex align-items-center gap-2 mb-2">
        <span class="badge text-bg-dark rounded-pill">${{ product.price }}</span>
        <span class="text-secondary small">{{ product.category }}</span>
      </div>
      <p class="text-secondary">{{ product.description }}</p>

      <div class="row g-2 mb-3" *ngIf="product.sizes?.length">
        <div class="col-12"><small class="fw-semibold">Size</small></div>
        @for (item of product.sizes; track $index) {
        <div class="col-auto">
          <button class="btn btn-sm btn-outline-dark rounded-pill px-3"
            (click)="selectedSize = item; product.size = item" [class.btn-dark]="selectedSize === item">{{ item }}
          </button>
        </div>
        }
      </div>

      <div class="input-group mb-3" style="max-width: 220px;">
        <span class="input-group-text">Qty</span>
        <input type="number" class="form-control" min="1" [(ngModel)]="qty">
      </div>
      @if(selectedSize != null) {
      <div class="row">
        <div class="col-auto pe-0">

          <button class="btn btn-dark" (click)="addToCart()" data-bs-toggle="offcanvas" data-bs-target="#cartDetail">Add
            to cart</button>
        </div>
        <div class="col-8">

          <button class="btn btn-dark" data-bs-toggle="offcanvas" data-bs-target="#favoriteDetail"
            (click)="addFavorite()">❤️Add Favorite</button>
        </div>
      </div>
      }@else {
      <p class="text-danger">Please Select Size Before You Order!!</p>
      }
    </div>
  </div>
</div>