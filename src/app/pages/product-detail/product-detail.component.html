<div class="container py-4" *ngIf="product">
  <div class="container py-3">
    <div class="row g-4">
      <!-- Left Column: Image Slider -->
      <div class="col-md-6 d-flex gap-4">
        <!-- Thumbnail List -->
        <div class="thumb-row d-flex gap-3  flex-column">
          <div *ngFor="let item of product.listImage; let i = index" class="thumb-wrapper"
            [class.active]="i === currentIndex" (click)="setActiveImage(i)">
            <img [src]="item" [alt]="product.name" class="thumb-img s shadow-sm">
          </div>
        </div>
        <!-- Main Image -->
        <div class="main-image-wrapper position-relative">
          <img [src]="product.listImage[currentIndex]" [alt]="product.name"
            class="w-100  shadow-sm object-fit-cover shadow-sm">

          <!-- Navigation Arrows -->
          <button class="nav-btn left"
            (click)="currentIndex = (currentIndex - 1 + product.listImage.length) % product.listImage.length">
            <i class="bi bi-chevron-left"></i>
          </button>
          <button class="nav-btn right" (click)="currentIndex = (currentIndex + 1) % product.listImage.length">
            <i class="bi bi-chevron-right"></i>
          </button>
        </div>


      </div>
      <div class="col-md-6">
        <a routerLink="/men" class="small text-decoration-none text-secondary">‚Üê Back</a>
        <h2 class="mt-2">{{ product.name }}</h2>
        <div class="d-flex align-items-center gap-2 mb-2">
          <span class="badge text-bg-danger rounded-pill ">${{ product.price }}</span>
          <span class="text-secondary small fw-bold">{{ product.category }}</span>
        </div>
        <p class="text-secondary">{{ product.description }}</p>

        <div class="row g-2 mb-3" *ngIf="product.sizes?.length">
          <div class="col-12"><small class="fw-semibold">Size</small></div>
          @for (item of product.sizes; track $index) {
          <div class="col-auto">
            <button class="btn btn-sm btn-outline-dark rounded-pill px-3"
              (click)="selectedSize = item; product.size = item" [class.btn-dark]="selectedSize === item">{{ item }}
            </button>
          </div>
          }
        </div>

        <div class="input-group mb-3" style="max-width: 220px;">
          <span class="input-group-text">Qty</span>
          <input type="number" class="form-control" min="1" [(ngModel)]="qty">
        </div>
        @if(selectedSize != null) {
        <div class="row">
          <div class="col-auto pe-0">

            <button class="btn btn-dark" (click)="addToCart()" data-bs-toggle="offcanvas"
              data-bs-target="#cartDetail">Add
              to cart</button>
          </div>
          <div class="col-8">

            <button class="btn btn-dark" data-bs-toggle="offcanvas" data-bs-target="#favoriteDetail"
              (click)="addFavorite()">‚ù§Ô∏èAdd Favorite</button>
          </div>
        </div>
        }@else {
        <p class="text-danger">Please Select Size Before You Order!!</p>
        }
        <!-- Product Information Section -->
        @if (product.details) {
        <div class="product-info mt-5">
          <h4 class="fw-bold mb-3">Product Information</h4>

          <div class="info-card p-3 rounded-3 shadow-sm mb-3" *ngIf="product.details">
            <div class="accordion" id="productInfoAccordion">

              <!-- Material -->
              <div class="accordion-item border-0 mb-2">
                <h2 class="accordion-header" id="headingMaterial">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseMaterial">
                    üßµ Material
                  </button>
                </h2>
                <div id="collapseMaterial" class="accordion-collapse collapse" data-bs-parent="#productInfoAccordion">
                  <div class="accordion-body text-secondary">
                    {{ product.details.material }}
                  </div>
                </div>
              </div>

              <!-- Fit -->
              <div class="accordion-item border-0 mb-2">
                <h2 class="accordion-header" id="headingFit">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseFit">
                    üëï Fit
                  </button>
                </h2>
                <div id="collapseFit" class="accordion-collapse collapse" data-bs-parent="#productInfoAccordion">
                  <div class="accordion-body text-secondary">
                    {{ product.details.fit }}
                  </div>
                </div>
              </div>

              <!-- Care -->
              <div class="accordion-item border-0 mb-2">
                <h2 class="accordion-header" id="headingCare">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseCare">
                    üßº Care Instructions
                  </button>
                </h2>
                <div id="collapseCare" class="accordion-collapse collapse" data-bs-parent="#productInfoAccordion">
                  <div class="accordion-body text-secondary">
                    {{ product.details.care }}
                  </div>
                </div>
              </div>

              <!-- Origin -->
              <div class="accordion-item border-0 mb-2">
                <h2 class="accordion-header" id="headingOrigin">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseOrigin">
                    üåç Country of Origin
                  </button>
                </h2>
                <div id="collapseOrigin" class="accordion-collapse collapse" data-bs-parent="#productInfoAccordion">
                  <div class="accordion-body text-secondary">
                    {{ product.details.origin }}
                  </div>
                </div>
              </div>

              <!-- Warranty -->
              <div class="accordion-item border-0">
                <h2 class="accordion-header" id="headingWarranty">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseWarranty">
                    üõ°Ô∏è Warranty
                  </button>
                </h2>
                <div id="collapseWarranty" class="accordion-collapse collapse" data-bs-parent="#productInfoAccordion">
                  <div class="accordion-body text-secondary">
                    {{ product.details.warranty }}
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
        }@else {
        <div class="alert alert-warning" role="alert"> No additional product information available.</div>
        }
      </div>
    </div>
  </div>
</div>